;;; -*-Emacs-Lisp-*-
;;;
;;; $Id$
;;;

(defun config-semi ()
  (let (prefix exec-prefix)
    (setq prefix (car command-line-args-left))
    (and prefix
	 (not (string-equal "NONE" prefix))
	 (progn
	   (defvar PREFIX prefix)
	   (setq command-line-args-left (cdr command-line-args-left))
	   )
	 (setq exec-prefix (car command-line-args-left))
	 (progn
	   (defvar EXEC_PREFIX exec-prefix)
	   ;;(setq command-line-args-left (cdr command-line-args-left))
	   )))
  (load-file "SEMI-CFG")
  (load-file "../bitmap-mule/BITMAP-ELS")
  (load-file "../mu/MU-ELS")
  (load-file "../mel/MEL-ELS")
  (load-file "SEMI-ELS")
  (princ (format "PREFIX=%s\tEXEC_PREFIX=%s\n" PREFIX EXEC_PREFIX))
  )

(defun directory= (dir1 dir2)
  (string= (file-name-as-directory dir1)(file-name-as-directory dir2))
  )

(defun compile-semi ()
  (config-semi)
  (print load-path)
  (compile-elisp-modules bitmap-modules		"../bitmap-mule")
  (compile-elisp-modules mu-modules-to-compile	"../mu")
  (compile-elisp-modules mel-modules		"../mel")
  (compile-elisp-modules semi-modules-to-compile ".")
  (compile-elisp-module  'mime-setup		".")
  )

(defun install-semi ()
  (config-semi)
  (princ (format "%s\n" emacs-version))
  (install-elisp-modules bitmap-modules "../bitmap-mule" BITMAP_DIR)
  (install-elisp-modules mu-modules	 "../mu"	MU_DIR)
  (install-elisp-modules mel-modules	 "../mel"	MEL_DIR)
  (install-elisp-modules semi-modules	 "."		SEMI_KERNEL_DIR)
  (install-elisp-modules '(mime-setup)	 "."	SETUP_FILE_DIR)
  )

(defun install-execs ()
  (config-semi)
  (install-files BINS	    BIN_SRC_DIR    BIN_DIR)
  (install-files METHODS METHOD_SRC_DIR METHOD_DIR nil t)
  )

;;; SEMI-MK ends here
